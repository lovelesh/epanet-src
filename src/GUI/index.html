<!DOCTYPE html>
<html>
   <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="WaterOpt">
      <link rel="shortcut icon" href="bootstrap/css/img/iisclogo_transparent.png" type="image/png">
      <title>IISc WaterOpt</title>
      
      <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
      <link rel="stylesheet" href="semantic-ui/semantic.min.css">
      <link rel="stylesheet" href="bootstrap/css/moreStyles.css">
      <link rel="stylesheet" href="bootstrap/css/fonts.css">
      <link rel="stylesheet" href="font-awesome-4.7.0/css/font-awesome.min.css">
      <script src="jquery/jquery.min.js"></script>
      <script src="bootstrap/js/bootstrap.min.js"></script>
      <script src="semantic-ui/semantic.min.js"></script>
   </head>

   <body onbeforeunload="return removeSession()">

       <section id="title">
           <div class="container-fluid">
               <img class="ui centered rounded image" src="bootstrap/css/img/top.JPG">
           </div>
       </section>

      <section id="form1-0">
          <div class="container-fluid">
              <div class="col-md-4 col-md-offset-1" style="padding-left:20px">
                  <div class="row" style="padding-top:20px">
                      <div class="ui huge blue label fluid">Control Panel</div>
                  </div>

                  <div class="row">
                      <div id="formDiv" style="padding:20px; background-color: rgb(200,215,235);">
                          <form id="uploadForm" enctype="multipart/form-data" name="uploadForm">

                              <div class="row">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Type</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <select class="ui dropdown form-control" 
                                                  id="Type" name="Type" onchange="changeType()">
                                              <option selected value="none">Select Type..</option>
                                              <option value="1">TARGET</option>
                                              <option value="0">SEARCH</option>
                                              <option value="2">SIMULATION</option>
                                          </select>			
                                      </div>  	
                                  </div>
                              </div>

                              <div class="row">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Network File</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="file" id="path1" name="path1" class="form-control" required/>
                                      </div>
                                  </div>
                              </div>

                              <div class="row" id="path2row">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Demand File</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="file" id="path2" name="path2" class="form-control" required />
                                      </div>
                                  </div>
                              </div>

                              <div class="row">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Joblist File</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="file" id="path3" name="path3" class="form-control" required />
                                      </div>
                                  </div>
                              </div>

                              <div class="row" id="tank-sol-row">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Tank Solution File</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="file" id="path4" name="path4" class="form-control" required/>
                                      </div>
                                  </div>
                              </div>		     

                              <div class="row" id="valve-sol-row">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Valve Solution File</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="file" id="valveSolPath" name="valveSolPath" class="form-control" required/>
                                      </div>
                                  </div>
                              </div>		     

                              <div class="row" id="path5row">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Current Level File</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="file" id="path5" name="path5" class="form-control" required/>
                                      </div>
                                  </div>
                              </div>		     

                              <div class="row" id="startTimeRow">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Start (0-23 hrs)</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="number" min="0" max="23" id="startTime" required class="form-control" placeholder="Start(0-23 hrs)" tabindex="2"/>
                                      </div>
                                  </div>
                              </div>		     

                              <div class="row" id="durationRow">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Duration (1-24 hrs)</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="number" min="1" max="24" id="duration" required value="1" class="form-control" placeholder="Duration (1-24 hrs)"/>
                                      </div>
                                  </div>
                              </div>

                              <div class="row" id="totalDurationRow">
                                  <div class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">End Time</div>
                                      </div>
                                  </div>
                                  <div class="col-md-8">
                                      <div class="form-group">
                                          <input type="text" id="totalDuration" value="1" class="form-control" placeholder="Total Duration" disabled/>
                                      </div>
                                  </div>
                              </div>


                              <div class="row">
                                  <div class="col-md-12" align="center">
                                      <div class="ui slider checkbox">
                                          <input type="checkbox" id="advanced-button">
                                          <label><b>Advanced Options</b></label>
                                      </div>
                                  </div>
                              </div>

                              <div class="row" id="advancedOptions" style="display:none">
                                  <div  class="col-md-4">
                                      <div class="form-group">
                                          <div class="ui right pointing label fluid">Advanced Options</div>
                                      </div>
                                  </div>

                                  <div class="col-md-8" id="adOpt">
                                      <div class="form-group">
                                          <div class="input-group">
                                              <span class="input-group-addon" id="basic-addon1" style="width:230px">Distance from Mid Point</span>
                                              <input type="number" min="1" max="10" id="w12" style="width:80px" class="form-control" value="1" placeholder="W12" required tabindex="2"/>
                                          </div>
                                      </div>

                                      <div class="form-group">
                                          <div class="input-group">
                                              <span class="input-group-addon" id="basic-addon1" style="width:230px">Periodicity</span>
                                              <input type="number" min="50" max="150" id="w3" style="width:80px" value="75" class="form-control" placeholder="W3" required tabindex="2"/>
                                          </div>
                                      </div>

                                      <div class="form-group">
                                          <div class="input-group">
                                              <span class="input-group-addon" id="basic-addon1" style="width:230px">Important Valve Change</span>
                                              <input type="number" min="100" max="500" id="w4" style="width:80px" value="300" class="form-control" placeholder="W4" required tabindex="2"/>
                                          </div>
                                      </div>
                                      <div class="form-group">
                                          <div class="input-group">
                                              <span class="input-group-addon" id="basic-addon1" style="width:230px">Negative Flow</span>
                                              <input type="number" min="0.1" max="0.5" step="0.1" id="w6" style="width:80px" value="0.5" class="form-control" placeholder="W6" required tabindex="2"/>
                                          </div>
                                      </div>
                                      <div class="form-group">
                                          <div class="input-group">
                                              <span class="input-group-addon" id="basic-addon1" style="width:230px">Flow Greater than Max Flow</span>
                                              <input type="number" min="1" max="10" id="w5" style="width:80px" value="1" class="form-control" placeholder="W5" required tabindex="2"/>
                                          </div>
                                      </div>
                                  </div>
                                  <div>
                                  </div>
                              </div>

                              <div class="row" id="uploadSuccess">
                                  <div class="form-group">
                                      <hr>
                                      <i class="fa fa-check-square-o" style="color:darkgreen" aria-hidden="true"></i>
                                      <label>Files Uploaded Successfully.</label>
                                  </div>
                              </div>

                              <div class="row" id="durationWarning">
                                  <div class="form-group">
                                      <label>Note: The sum of Start time(in current level file) and Duration should not exceed 24 hours. If it exceeds 24 hours, the default value will be set to 24.</label>
                                  </div>
                              </div>

                              <div class="row">
                                  <div class="ui divider"></div>
                                  <div class="col-md-3 col-md-offset-1" align="center"> 
                                      <button type="submit" class="ui blue icon button fluid" id="uploadButton">
                                          <i class="upload icon"></i> Upload Files
                                      </button>
                                  </div>
                                  <div class="col-md-3" align="center"> 
                                      <button type="button" class="ui negative icon button fluid" id="cancel-button" onclick="cancelSimulation()">
                                          <i class="remove circle icon"></i>  Abort Simulation
                                      </button>
                                  </div>
                                  <div class="col-md-4" align="center"> 
                                      <button type="button" class="ui green icon button fluid" id="start-button" onclick="loadDoc()">
                                          <i class="play circle icon"></i>  Start Simulation
                                      </button>
                                  </div>
                              </div>
                              <div class="ui divider"></div>

                              <div class="mbr-buttons" align="center" id="export-button-grp" style="padding-top:20px">
                                  <button type="button" class="ui green button" 
                                                        id="tank-view-button" 
                                                        onclick="viewTankFile()"><i class="fa fa-eye" aria-hidden="true"></i>View csv and Plot Graphs
                                                        <i class="fa fa-line-chart" aria-hidden="true"></i>
                                  </button>

                              </div>		     
                          </form>
                      </div>
                  </div>
              </div> <!-- col-md-5 ends here -->

              <div class="col-md-5 col-md-offset-1" id="outputDiv">
                  <div class="row" style="padding-top:20px">
                      <div class="ui huge blue label fluid">Iteration Output</div>
                  </div>
                  <div class="row">
                          <table class="ui celled table" id="test"></table>
                  </div>
              </div>
          </div>
      </section>

      <section id="form1-1">

          <div class="ui divider"></div>

          <div class="container-fluid" id="file-op-line">

          <div class="row" id="joblist-file-row" style="padding:20px;">
              <div class="col-md-10 col-md-offset-1" id="job-op-line" style="max-height:450px">
                  <div class="ui raised segment">
                      <div class="row">
                          <div class="ui huge blue label fluid" id="file-op-heading">
                              <i class="fa fa-file-text" aria-hidden="true"></i>  Joblist File
                          </div>
                      </div>

                      <div class="row">
                          <div style="overflow:auto; max-height:250px">
                              <table class="ui inverted celled table" id="job-file-output"></table>
                          </div>
                      </div>

                      <div class="ui divider"></div>

                      <div class="row">
                          <div align="center" id="job-download">
                              <a id="export-button-job" class="ui green button" role="button" align="center" download>
                                  <i class="fa fa-download" aria-hidden="true"></i> Download job.csv
                              </a>
                          </div> 
                      </div> 
                  </div>
              </div>
          </div>

          <div class="row" style="padding:20px">
              <div class="col-md-10 col-md-offset-1" id="tank-op-line" style="max-height:450px">
                  <div class="ui raised segment">
                      <div class="row">
                          <div class="ui huge blue label fluid" id="file-op-heading">
                              <i class="fa fa-file-text" aria-hidden="true"></i>  Tank File
                          </div>
                      </div>

                      <div class="row">
                          <div style="overflow:auto; max-height:250px">
                              <table class="ui inverted celled table" id="tank-file-output" style="padding-bottom:15px"></table>
                          </div>
                      </div>

                      <div class="ui divider"></div>

                      <div align="center" id="tank-download">
                          <a id="export-button-tank" class="ui green button" role="button" align="center" download>
                              <i class="fa fa-download" aria-hidden="true"></i> Download tank.csv
                          </a>
                      </div>

                      <div align="center" id="sim-tank-download">
                          <a id="export-sim-tank" class="ui green button" role="button" align="center" download>
                              <i class="fa fa-download" aria-hidden="true"></i> Download sim_tank.csv
                          </a>
                      </div> 
                      </div>
                  </div>
              </div>

              <div class="row" style="padding:20px">
                  <div class="col-md-10 col-md-offset-1" id="valve-op-line" style="max-height:450px">
                      <div class="ui raised segment">
                          <div class="row">
                              <div class="ui huge blue label fluid" id="file-op-heading">
                                  <i class="fa fa-file-text" aria-hidden="true"></i>  Valve File
                              </div>
                          </div>

                          <div class="row">
                              <div style="overflow:auto; max-height:250px">
                                  <table class="ui inverted celled table" id="valve-file-output" style="padding-bottom:15px"></table>
                              </div>
                          </div>

                          <div class="ui divider"></div>

                          <div align="center" id="valve-download">
                              <a id="export-button-valve" class="ui green button" role="button" align="center" download>
                                  <i class="fa fa-download" aria-hidden="true"></i> Download valve.csv
                              </a>
                          </div>

                          <div align="center" id="sim-valve-download">
                              <a id="export-sim-valve" class="ui green button" role="button" align="center" download>
                                  <i class="fa fa-download" aria-hidden="true"></i> Download sim_valve.csv
                              </a>
                          </div>
                      </div>
                  </div>
              </div>

              <!--Second Row for graphs-->
              <div class="row" style="padding:20px">
                  <div class="col-md-10 col-md-offset-1">
                      <div class="ui raised segment">
                          <div class="ui huge blue label fluid">
                              TANK GRAPH
                          </div>
                          <section class="panel"><div id="container1" class="panel-body text-center"></div></section>
                      </div>
                  </div>
              </div>

              <div class="row" style="padding:20px">
                  <div class="col-md-10 col-md-offset-1">
                      <div class="ui raised segment">
                          <div class="ui huge blue label fluid">
                              VALVE GRAPH
                          </div>
                          <section class="panel"><div id="container2" class="panel-body text-center"></div></section>
                      </div>
                  </div>
              </div>

              <div class="row" style="padding:20px">
                  <div class="col-md-10 col-md-offset-1">
                      <div class="ui raised segment">
                          <div class="ui huge blue label fluid">
                              TANK
                          </div>
                          <section class="panel"><div id="container3" class="panel-body text-center"></div></section>
                      </div>
                  </div>
              </div>

              <div class="row" style="padding:20px">
                  <div class="col-md-10 col-md-offset-1">
                      <div class="ui raised segment">
                          <div class="ui huge blue label fluid">
                              VALVE
                          </div>
                          <section class="panel"><div id="container4" class="panel-body text-center"></div></section>
                      </div>
                  </div>
              </div>

         </div>
      </section>

      <section id="title" style="padding-top: 100px">
          <div class="container" style="max-width:100%">
              <div class="row" style="background-color: dimgray;">
                  <div align="center" style="padding:10px">
                      <label style="color: white !important;">Powered by<a href="http://www.thingtronics.com"> ThingTronics Innovations Private Ltd.</a></label>
                  </div>
             </div>
          </div>
      </section>

      <script src="bootstrap-filestyle-1.2.1/src/bootstrap-filestyle.min.js"></script>
      <script src="/socket.io/socket.io.js"></script>
      <script src="javascript/jquery-csv.js"></script>
      <script src="javascript/simController.js"></script>
      <!--<script src="Highcharts-5.0.6/code/highcharts.js"></script>-->
      <!--<script src="Highcharts-5.0.6/code/js/modules/exporting.js"></script>-->
      <script type="text/javascript" src="http://code.highcharts.com/highcharts.js"></script>
      <script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
      <script src="javascript/graphPlotter.js"></script>

   </body>
</html>
